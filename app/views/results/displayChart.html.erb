<% count0 = 0 %>
<% count1 = 0 %>
<% count2 = 0 %>
<% count3 = 0 %>
<% count4 = 0 %>
<% count5 = 0 %>
<% @results.each do |r| %>
  <% if r.num1 == 5 %>
    <% count5 = count5 + 1 %>
     <% else if r.num1 == 4 %>
       <% count4 = count4 + 1 %>
      <% else if r.num1 == 3 %>
        <% count3 = count3 + 1 %> 
        <% else if r.num1 == 2 %>
          <% count2 = count2 + 1 %>
          <% else if r.num1 == 1 %>
            <% count1 = count1 + 1 %>
            <% else if r.num1 == 0 %>
              <% count0 = count0 + 1 %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Question Choice');
        data.addColumn('number', 'Total');
        data.addRows([
          ['1', <%= count1 %> ],
          ['2', <%= count2 %> ],
          ['3', <%= count3 %> ],
          ['4', <%= count4 %> ],
          ['5', <%= count5 %> ],
          ['Did not choose', <%= count0 %> ]
        ]);

        var options = {
          title: 'What people chose for Question 1',
          hAxis: {title: 'Question Choice', titleTextStyle: {color: 'red'}}
        }

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>


